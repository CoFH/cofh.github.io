<div class="team-carousel">
  <!--Placeholder card, used to simulate the vertical space required by the other cards.-->
  <div class="team-card card-center" style="visibility:hidden; position:relative;">
    <img />
    <h2>Name</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    <q>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</q>
    <ul class="list-no-style">
      <li><i class="fab fa-github"></i></li>
    </ul>
  </div>
  
  {{- range seq 0 (sub (len (.Site.Data.team_members)) 1) -}}
    {{- $member := index $.Site.Data.team_members . -}}
    {{- $position := "" -}}
    {{- if eq . 0 -}}
      {{- $position = " card-center" -}}
    {{- else if eq . (sub (len ($.Site.Data.team_members)) 1) -}}
      {{- $position = " card-left" -}}
    {{- else if eq . 1 -}}
      {{- $position = " card-right" -}}
    {{- end -}}
    <div class="team-card{{$position}}" data-index={{.}} tabindex=0>
      <img src="{{$member.image}}" />
      <h2>{{$member.name}}</h2>
      <p>{{$member.description}}</p>
      {{- if $member.quote -}}
        <q>{{$member.quote}}</q>
      {{- end -}}
      <ul class="list-no-style">
        {{- range $member.links -}}
          <li><a href="{{.url}}" target="_blank"><i class="fa fa-{{.icon}}"></i></a></li>
        {{- end -}}
      </ul>
    </div>
  {{- end -}}
</div>
<script>
  const cards = document.querySelectorAll('.team-card[data-index]');
  var centerIndex = 0;
  cards.forEach(elem => {
      elem.onclick = selectCard;
      elem.onfocus = selectCard;
    });

  function selectCard(e) {
    cards[(centerIndex + cards.length - 1) % cards.length].classList.remove("card-left");
    cards[centerIndex].classList.remove("card-center");
    cards[(centerIndex + 1) % cards.length].classList.remove("card-right");
    
    selectedIndex = parseInt(e.currentTarget.dataset.index);
    cards[(selectedIndex + cards.length - 1) % cards.length].classList.add("card-left");
    cards[selectedIndex].classList.add("card-center");
    cards[(selectedIndex + 1) % cards.length].classList.add("card-right");
    centerIndex = selectedIndex;
  }
</script>